#https://stackoverflow.com/questions/63990487/package-conflict-with-anaconda
#IMPORTANT: By telling conda that it can visit multiple channels (conda-forge, bioconda and defaults), it has some extra options to resolve the dependency conflicts.
conda create -n bacto2 -c conda-forge -c bioconda -c defaults python=3.7
#prokka need to be installed with root-env
#sudo apt install prokka
#--> no databases: https://github.com/tseemann/prokka/issues/540
#prokka to be installed under base-env
conda activate base
conda install -c conda-forge -c bioconda -c defaults prokka
conda deactivate
conda activate bacto2
conda install -c conda-forge -c bioconda -c defaults trimmomatic fastqc shovill 
conda install -c conda-forge -c bioconda -c defaults mlst roary snippy fasttree 
conda install -c conda-forge -c bioconda -c defaults raxml-ng gubbins snp-sites
#conda install -c conda-forge -c bioconda -c defaults biopython


#---------------------------------------- TRASH ---------------------------------------
#conda create -n bacto3 python=3.7 libgcc-ng=7.3 libstdcxx-ng=7.3
#conda install -c bioconda prokka perl-bioperl
conda install -c bioconda prokka perl-bioperl perl-datetime perl-xml-simple perl-digest-md5 perl-bio-searchio-hmmer
#-->ERROR: ! Installing the dependencies failed: Module 'XML::Parser::PerlSAX' is not installed, Module 'DB_File' is not installed, Module 'XML::LibXML' is not installed, Module 'Test::Memory::Cycle' is not installed, Module 'XML::DOM' is not installed, Module 'Graph::Directed' is not installed, Module 'XML::Twig' is not installed, Module 'XML::LibXML::Reader' is not installed
! Bailing out the installation for BioPerl-1.7.8.

#conda install -c bioconda trimmomatic fastqc shovill prokka mlst roary snippy fasttree raxml-ng gubbins snp-sites
conda install -c bioconda trimmomatic roary fasttree raxml-ng mlst gubbins
conda install -c conda-forge biopython

#---- brew is not a good idea: DEACTIVATing it in .bashrc ----
#DEBUG prokka error: https://github.com/tseemann/prokka/issues/446
#cpan 
#install Bio::Perl Time::Piece XML::Simple Digest::MD5
#conda install -c bioconda perl-xml-simple perl-bioperl
#Solution: https://github.com/tseemann/prokka/issues/528
#sudo apt install bioperl libdatetime-perl libxml-simple-perl libdigest-md5-perl libbio-searchio-hmmer-perl

#brew install brewsci/bio/prokka
#brew install brewsci/bio/shovill
#brew install brewsci/bio/snippy  #which also installs snp-sites

#conda env create -f=envs/bengal_m.yaml    # python3 is included
#conda env update -f=envs/mykrobe_m.yaml
#conda activate bengal3_ac3
conda install -c bioconda ariba
#conda install snp-sites
conda install seq-seq-pan


#conda remove -n bengal --all
#conda remove -n bengal2 --all

